<!doctype html><html lang=en dir=auto><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>Host your Discord Bot on EC2 instance(AWS) | rishab.cloud</title><meta name=keywords content><meta name=description content="Click on me to see the content."><meta name=author content="Rishab Kumar"><link rel=canonical href=https://rishabkumar.com/blog/dicord-bot-on-aws/><link crossorigin=anonymous href=/assets/css/stylesheet.min.313c842fbca9ea02213024d5783630785d6cb98b674f912b962a0f9a4b1121db.css integrity="sha256-MTyEL7yp6gIhMCTVeDYweF1suYtnT5ErlioPmksRIds=" rel="preload stylesheet" as=style><script defer crossorigin=anonymous src=/assets/js/highlight.min.b95bacdc39e37a332a9f883b1e78be4abc1fdca2bc1f2641f55e3cd3dabd4d61.js integrity="sha256-uVus3DnjejMqn4g7Hni+Srwf3KK8HyZB9V4809q9TWE=" onload=hljs.initHighlightingOnLoad()></script>
<link rel=icon href=https://rishabkumar.com/images/favicon.ico><link rel=icon type=image/png sizes=16x16 href=https://rishabkumar.com/images/favicon-16x16.png><link rel=icon type=image/png sizes=32x32 href=https://rishabkumar.com/images/favicon-32x32.png><link rel=apple-touch-icon href=https://rishabkumar.com/images/apple-touch-icon.png><link rel=mask-icon href=https://rishabkumar.com/images/apple-touch-icon.png><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><noscript><style>#theme-toggle,.top-link{display:none}</style><style>@media(prefers-color-scheme:dark){:root{--theme:rgb(29, 30, 32);--entry:rgb(46, 46, 51);--primary:rgb(218, 218, 219);--secondary:rgb(155, 156, 157);--tertiary:rgb(65, 66, 68);--content:rgb(196, 196, 197);--hljs-bg:rgb(46, 46, 51);--code-bg:rgb(55, 56, 62);--border:rgb(51, 51, 51)}.list{background:var(--theme)}.list:not(.dark)::-webkit-scrollbar-track{background:0 0}.list:not(.dark)::-webkit-scrollbar-thumb{border-color:var(--theme)}}</style></noscript></head><body id=top><head><link rel=stylesheet href="https://fonts.googleapis.com/css?family=Rubik"><script type=application/javascript>var doNotTrack=!1;doNotTrack||(function(e,t,n,s,o,i,a){e.GoogleAnalyticsObject=o,e[o]=e[o]||function(){(e[o].q=e[o].q||[]).push(arguments)},e[o].l=1*new Date,i=t.createElement(n),a=t.getElementsByTagName(n)[0],i.async=1,i.src=s,a.parentNode.insertBefore(i,a)}(window,document,"script","https://www.google-analytics.com/analytics.js","ga"),ga("create","UA-141527833-1","auto"),ga("send","pageview"))</script><script type=application/javascript>var doNotTrack=!1;doNotTrack||(window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)},ga.l=+new Date,ga("create","UA-141527833-1","auto"),ga("send","pageview"))</script><script async src=https://www.google-analytics.com/analytics.js></script></head><script>localStorage.getItem("pref-theme")==="dark"?document.body.classList.add("dark"):localStorage.getItem("pref-theme")==="light"?document.body.classList.remove("dark"):window.matchMedia("(prefers-color-scheme: dark)").matches&&document.body.classList.add("dark")</script><header class=header><nav class=nav><div class=logo><a href=https://rishabkumar.com accesskey=h title="rishab.cloud (Alt + H)">rishab.cloud</a>
<span class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)"><svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg><svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></span></div><ul id=menu><li><a href=/ title=Home><span>Home</span></a></li><li><a href=https://rishabkumar.com/blog/ title=Blog><span>Blog</span></a></li><li><a href=https://rishabkumar.com/about/ title=About><span>About</span></a></li><li><a href=https://notes.rishab.cloud title=Notes><span>Notes</span></a></li><li><a href=https://anchor.fm/rishabkumar title=Podcast><span>Podcast</span></a></li></ul></nav></header><main class=main><article class=post-single><header class=post-header><div class=breadcrumbs><a href=https://rishabkumar.com>Home</a>&nbsp;»&nbsp;<a href=https://rishabkumar.com/blog/>Blog</a></div><h1 class=post-title>Host your Discord Bot on EC2 instance(AWS)</h1><div class=post-description>Click on me to see the content.</div><div class=post-meta><span title='2020-02-10 00:00:00 +0000 UTC'>February 10, 2020</span>&nbsp;·&nbsp;4 min&nbsp;·&nbsp;Rishab Kumar</div></header><div class=toc><details><summary accesskey=c title="(Alt + C)"><span class=details>Table of Contents</span></summary><div class=inner><ul><li><a href=#creating-a-server-instance aria-label="Creating a server instance">Creating a server instance</a></li><li><a href=#connect-to-your-instance aria-label="Connect to your instance">Connect to your instance</a></li><li><a href=#installing-node-and-running-your-bot aria-label="Installing node and running your Bot">Installing node and running your Bot</a></li><li><a href=#install-pm2 aria-label="Install PM2">Install PM2</a></li></ul></div></details></div><div class=post-content><p>Hey Everyone,</p><p>Today I will be sharing on how to host your Discord Bot on AWS (EC2 Instance).
Assuming that you already have a discord bot created (if not, please checkout this amazing article :<a href=https://medium.com/davao-js/2019-tutorial-creating-your-first-simple-discord-bot-47fc836a170b>Creating your first Discord Bot — Part 1</a></p><p>Let&rsquo;s dive into it.</p><h2 id=creating-a-server-instance>Creating a server instance</h2><ul><li>Go to the Amazon EC2 Page and sign up for an account.</li><li>Navigate to the Amazon web services console.</li><li>Click on “EC2” (top left of page).</li><li>Select &ldquo;Launch Instance&rdquo;.</li><li>Select &ldquo;Ubuntu Server 18.04 LTS (HVM), SSD Volume Type - ami-07ebfd5b3428b6f4d&rdquo;
<img loading=lazy src=https://dev-to-uploads.s3.amazonaws.com/i/5lxqot51tnr4rd3whiry.png alt="Alt Text"></li><li>Pick “General Purpose” (free tier micro)</li><li>Select “Review and Launch”</li><li>Launch!</li><li>You’ll then see a prompt about your “key/pair”. The key pair consists of a public key that AWS stores, and a private key file that you store. They come together in a file “something.pem” which you will need in order to login to your account. Select “create new pair” and enter a title for your key/pair.</li><li>Select “Download Key Pair”. The file will download to your computer. Save this file! You’ll need it for future steps.</li><li>Now click “Launch Instances”.</li><li>Now you should see a message that “Your instances are launching” (it may take a few minutes before they are available.)</li><li>Select “View Instances”.
<img loading=lazy src=https://dev-to-uploads.s3.amazonaws.com/i/8k7hjrfpjzvwg6ezo2te.png alt="Alt Text"></li></ul><h2 id=connect-to-your-instance>Connect to your instance</h2><ul><li>Navigate terminal to the directory where you have your “pem” file. First you must make sure your key is not “publicly” viewable. This has to do with file permissions.</li></ul><blockquote><p>chmod 400 yourkeyfile.pem</p></blockquote><ul><li>Login using the key with the following command:</li></ul><blockquote><p>$ ssh -i &ldquo;yourkeyfile.pem&rdquo; <a href=mailto:ubuntu@54.38.245.127>ubuntu@54.38.245.127</a></p></blockquote><ul><li>⚠️Replace “54.38.245.127” with your “public IP” as shown in your EC2 console.</li><li>Your terminal should then show that you have connected.😊</li></ul><h2 id=installing-node-and-running-your-bot>Installing node and running your Bot</h2><ul><li>Install node</li></ul><blockquote><p>sudo apt-get update
sudo apt-get install nodejs
sudo apt-get install npm</p></blockquote><ul><li>Upload your node application to the server. You can do this with SFTP software like Cyberduck or WinSCP. The key is selecting “Use Public Key Authentication” rather than enter a password. OR you can clone your repo from Git.</li><li>Install the node package dependencies (specified in your package.json file):</li></ul><blockquote><p>npm install</p></blockquote><ul><li>Once your files are uploaded you’ll want to check and make sure your bot works, i.e.</li></ul><blockquote><p>node bot.js</p></blockquote><ul><li>The bot will only run while you have terminal open. In order for it to run after you’ve logged out of your EC2 instance and closed your computer, you can either use PM2 or &ldquo;forever&rdquo;.</li></ul><h2 id=install-pm2>Install PM2</h2><ul><li>PM2 provides an easy way to manage and daemonize applications (run them in the background as a service).</li><li>We will use npm, a package manager for Node modules that installs with Node.js, to install PM2 on our server. Use this command to install PM2</li></ul><blockquote><p>sudo npm install -g pm2</p></blockquote><p>Now, we will use the pm2 start command to run our bot, bot.js, in the background</p><blockquote><p>pm2 start bot.js
[PM2] Starting /home/ubuntu/discord-greeter-bot/bot.js in fork_mode(1 instance)
[PM2] Done.
┌────┬────────────────────┬──────────┬──────┬───────────┬──────────┬──────────┐
│ id │ name │ mode │ ↺ │ status │ cpu │ memory > │
├────┼────────────────────┼──────────┼──────┼───────────┼──────────┼──────────┤
│ 0 │ bot │ fork │ 0 │ online │ 0% │ 40.4mb │
│ 1 │ bot │ fork │ 0 │ online │ 0% │ 24.5mb │
└────┴────────────────────┴──────────┴──────┴───────────┴──────────┴──────────┘</p></blockquote><p>⚠️Applications that are running under PM2 will be restarted automatically if the application crashes or is killed, but an additional step needs to be taken to get the application to launch on system startup (boot or reboot). Luckily, PM2 provides an easy way to do this, the startup subcommand.</p><p>The startup subcommand generates and configures a startup script to launch PM2 and its managed processes on server boots:</p><blockquote><p>pm2 startup systemd</p></blockquote><p>The last line of the resulting output will include a command that you must run with superuser privileges:</p><blockquote><p>Output
[PM2] Init System found: systemd
[PM2] You have to run this command as root. Execute the following command:
sudo env PATH=$PATH:/usr/bin /usr/lib/node_modules/pm2/bin/pm2 startup systemd -> -u ubuntu &ndash;hp /home/ubuntu</p></blockquote><p>Run the command that was generated (similar to the highlighted output above, but with your username instead of ubuntu) to set PM2 up to start on boot (use the command from your own output):</p><blockquote><p>sudo env PATH=$PATH:/usr/bin /usr/lib/node_modules/pm2/bin/pm2 startup systemd -> u ubuntu &ndash;hp /home/ubuntu</p></blockquote></div><footer class=post-footer><div class=share-buttons><div class=share-buttons><a target=_blank rel="noopener noreferrer" aria-label="share Host your Discord Bot on EC2 instance(AWS) on twitter" href="https://twitter.com/intent/tweet/?text=Host%20your%20Discord%20Bot%20on%20EC2%20instance%28AWS%29&url=https%3a%2f%2frishabkumar.com%2fblog%2fdicord-bot-on-aws%2f"><svg viewBox="0 0 512 512" height="30" width="30" fill="currentcolor"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H62.554c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892zM195.519 424.544c135.939.0 210.268-112.643 210.268-210.268.0-3.218.0-6.437-.153-9.502 14.406-10.421 26.973-23.448 36.935-38.314-13.18 5.824-27.433 9.809-42.452 11.648 15.326-9.196 26.973-23.602 32.49-40.92-14.252 8.429-30.038 14.56-46.896 17.931-13.487-14.406-32.644-23.295-53.946-23.295-40.767.0-73.87 33.104-73.87 73.87.0 5.824.613 11.494 1.992 16.858-61.456-3.065-115.862-32.49-152.337-77.241-6.284 10.881-9.962 23.601-9.962 37.088.0 25.594 13.027 48.276 32.95 61.456-12.107-.307-23.448-3.678-33.41-9.196v.92c0 35.862 25.441 65.594 59.311 72.49-6.13 1.686-12.72 2.606-19.464 2.606-4.751.0-9.348-.46-13.946-1.38 9.349 29.426 36.628 50.728 68.965 51.341-25.287 19.771-57.164 31.571-91.8 31.571-5.977.0-11.801-.306-17.625-1.073 32.337 21.15 71.264 33.41 112.95 33.41z"/></svg></a><a target=_blank rel="noopener noreferrer" aria-label="share Host your Discord Bot on EC2 instance(AWS) on linkedin" href="https://www.linkedin.com/shareArticle?mini=true&url=https%3a%2f%2frishabkumar.com%2fblog%2fdicord-bot-on-aws%2f&title=Host%20your%20Discord%20Bot%20on%20EC2%20instance%28AWS%29&summary=Host%20your%20Discord%20Bot%20on%20EC2%20instance%28AWS%29&source=https%3a%2f%2frishabkumar.com%2fblog%2fdicord-bot-on-aws%2f"><svg viewBox="0 0 512 512"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H62.554c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892zM160.461 423.278V197.561h-75.04v225.717h75.04zm270.539.0V293.839c0-69.333-37.018-101.586-86.381-101.586-39.804.0-57.634 21.891-67.617 37.266v-31.958h-75.021c.995 21.181.0 225.717.0 225.717h75.02V297.222c0-6.748.486-13.492 2.474-18.315 5.414-13.475 17.767-27.434 38.494-27.434 27.135.0 38.007 20.707 38.007 51.037v120.768H431zM123.448 88.722C97.774 88.722 81 105.601 81 127.724c0 21.658 16.264 39.002 41.455 39.002h.484c26.165.0 42.452-17.344 42.452-39.002-.485-22.092-16.241-38.954-41.943-39.002z"/></svg></a><a target=_blank rel="noopener noreferrer" aria-label="share Host your Discord Bot on EC2 instance(AWS) on reddit" href="https://reddit.com/submit?url=https%3a%2f%2frishabkumar.com%2fblog%2fdicord-bot-on-aws%2f&title=Host%20your%20Discord%20Bot%20on%20EC2%20instance%28AWS%29"><svg viewBox="0 0 512 512"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H62.554c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892zM446 265.638c0-22.964-18.616-41.58-41.58-41.58-11.211.0-21.361 4.457-28.841 11.666-28.424-20.508-67.586-33.757-111.204-35.278l18.941-89.121 61.884 13.157c.756 15.734 13.642 28.29 29.56 28.29 16.407.0 29.706-13.299 29.706-29.701.0-16.403-13.299-29.702-29.706-29.702-11.666.0-21.657 6.792-26.515 16.578l-69.105-14.69c-1.922-.418-3.939-.042-5.585 1.036-1.658 1.073-2.811 2.761-3.224 4.686l-21.152 99.438c-44.258 1.228-84.046 14.494-112.837 35.232-7.468-7.164-17.589-11.591-28.757-11.591-22.965.0-41.585 18.616-41.585 41.58.0 16.896 10.095 31.41 24.568 37.918-.639 4.135-.99 8.328-.99 12.576.0 63.977 74.469 115.836 166.33 115.836s166.334-51.859 166.334-115.836c0-4.218-.347-8.387-.977-12.493 14.564-6.47 24.735-21.034 24.735-38.001zM326.526 373.831c-20.27 20.241-59.115 21.816-70.534 21.816-11.428.0-50.277-1.575-70.522-21.82-3.007-3.008-3.007-7.882.0-10.889 3.003-2.999 7.882-3.003 10.885.0 12.777 12.781 40.11 17.317 59.637 17.317 19.522.0 46.86-4.536 59.657-17.321 3.016-2.999 7.886-2.995 10.885.008 3.008 3.011 3.003 7.882-.008 10.889zm-5.23-48.781c-16.373.0-29.701-13.324-29.701-29.698.0-16.381 13.328-29.714 29.701-29.714 16.378.0 29.706 13.333 29.706 29.714.0 16.374-13.328 29.698-29.706 29.698zM160.91 295.348c0-16.381 13.328-29.71 29.714-29.71 16.369.0 29.689 13.329 29.689 29.71.0 16.373-13.32 29.693-29.689 29.693-16.386.0-29.714-13.32-29.714-29.693z"/></svg></a></div></footer></article></main><footer class=footer><span>built with ♥ rishab</footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg></a><script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove("dark"),localStorage.setItem("pref-theme","light")):(document.body.classList.add("dark"),localStorage.setItem("pref-theme","dark"))})</script><script>document.querySelectorAll("pre > code").forEach(e=>{const n=e.parentNode.parentNode,t=document.createElement("button");t.classList.add("copy-code"),t.innerText="copy";function s(){t.innerText="copied!",setTimeout(()=>{t.innerText="copy"},2e3)}t.addEventListener("click",t=>{if("clipboard"in navigator){navigator.clipboard.writeText(e.textContent),s();return}const n=document.createRange();n.selectNodeContents(e);const o=window.getSelection();o.removeAllRanges(),o.addRange(n);try{document.execCommand("copy"),s()}catch{}o.removeRange(n)}),n.classList.contains("highlight")?n.appendChild(t):n.parentNode.firstChild==n||(e.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName=="TABLE"?e.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(t):e.parentNode.appendChild(t))})</script></body></html>